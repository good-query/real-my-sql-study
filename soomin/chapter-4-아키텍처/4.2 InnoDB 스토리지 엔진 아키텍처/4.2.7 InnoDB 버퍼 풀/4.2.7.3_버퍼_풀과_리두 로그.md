<h1 align='center'>3️⃣ 버퍼 풀과 리두 로그 </h1>

## (1) 버퍼 풀을 허용 한계치 까지 늘리면 모든 기능의 성능이 개선 될까? 

`KEY WORD` : `반은 맞고 반은 틀리다.`

버퍼 풀이 하는 주요 기능은 <u>(1) 데이터 캐싱 기능</u>과 <u>Batch Write 기능</u>이다. 버퍼 풀이 커지면 디스크에서 가져온 데이터를 많이 적재할 수 있으므로 (1)번 기능은 좋아지겠지만, (2)번에게 성능 개선은 없다.

  (2)번을 개선하기 위해서는 변경된 페이지의 변경 내역이 담긴 **리두 로그**들이 모여 있는 **리두 로그 파일의 전체 크기를 늘려야 한다.**

## (2) 리두 로그는 어떻게 돌아갈까? 

리두 로그들은 리두 로그 파일이라는 고정된 크기의 파일에 순차적으로 저장된다. 리두 로그 파일은 크기가 고정되어 있기에, 저장된 리두 로그들이 쌓인다면, 어느 순간 특정 리두 로그 엔트리는 새롭게 쓰이는 새로운 리두 로그 엔트리에 의해 덮어써진다. 따라서 InnoDB는 자신만의 특정 주기를 정해서, 정기적으로 리두로그와 그것이 연결된 더티 페이지를 디스크와 동기화 시키고 지운다.

여기서 무언가 내용이 쓰여 있어서 재사용 불가능한 리두 로그 파일의 공간을 **활성 리두 로그**라고 한다. 

따라서 InnoDB의 버퍼 풀이 10GB 이며 리두 로그 파일이 전체 크기의 100MB인 경우, 버퍼 풀은 최대 100MB 밖에 배치 라이트 기능에 사용하지 못하게 된다. 그렇다고 리두 로그 파일 크기를 너무 크게 잡게 되면, innoDB가 Batch write 할 더티 페이지 원기옥을 모을 수 있기 때문에, 급작스러운 디스크 쓰기 부하가 발생할 가능성이 높다. 따라서 적당한 크기로 잡아야 한다.



## (3) 추가 공부: 리두 로그와 더티 페이지에 저장되는 정보는 어떻게 다른가? 

더티 페이지에는 실제로 변경된 데이터가 그대로 저장되어 있다.
리두 로그에는 *어떤 데이터를 어떻게 변경했는지* 에 대한 기록이 저장되어 있다.

이 덕에 DB 서버가 비정상 종료 되어도 리두 로그를 보고 롤백이나 복구가 가능해진다.