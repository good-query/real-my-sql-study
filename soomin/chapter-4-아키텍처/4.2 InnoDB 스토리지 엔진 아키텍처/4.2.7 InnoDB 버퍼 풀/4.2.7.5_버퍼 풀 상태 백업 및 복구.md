<h1 align='center'> 5️⃣ 버퍼 풀 상태  백업 및 복구 </h1>

## (0) 들어가며

InnoDB의 버퍼 풀은 쿼리의 성능과 매우 밀접하게 연결되어 있다. DB 서버 다운 되었다가 재시작한 경우, 캐싱된 데이터가 없어서 다운 전의 10분의 1의 성능도 안되는 경우가 많다.
  디스크의 데이터가 버퍼 풀에 충분히 적재되어 있는 경우를 `워밍업`이라 부르는데 버퍼 풀이 잘 워밍업 된상태에서는 그렇지 않은 경우보다 쿼리 처리 속도가 몇 십배 높다.
이렇듯  다운된 서버가 워밍업 하기에는 많은 시간이 걸리므로, 버퍼 풀 상태를 미리 백업해놓고, 재시작 시 복구해서 사용하면 **워밍업을 이미 한 상태의 서버**를 사용할 수 있다.

## (1) 버퍼 풀 백업과 복구의 원리

InnoDB 버퍼 풀의 백업 데이터는 몇 십 MB이하로 엄청 작은데, 이는 적재된 페이지 자체를 저장하는 것이 아니라 페이지의 메타 정보만 저장하기 때문이다. 복구 시 이를 토대로 데이터를 다시 메모리에 로드 한다.

## (2) 관련 SQL 문

**버퍼 풀 백업 활성화**

```sql
SET GLOBAL innodb_buffer_pool_dump_at_shutdown = ON;
```

**버퍼 풀 상태 복구**

```sql
SET GLOBAL innodb_buffer_pool_load_at_startup = ON;
```

 **버퍼 풀 상태 수동 백업**

```sql
SET GLOBAL innodb_buffer_pool_dump_now = ON;
```

 **버퍼 풀 상태 수동 복구**

```sql
SET GLOBAL innodb_buffer_pool_load_now = ON;
```

