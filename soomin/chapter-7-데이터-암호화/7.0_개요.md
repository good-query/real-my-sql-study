<h1 align = 'center'> 7.0 개요 </h1>

# 1. 버전 차이

| 버전                 | MySQL 5.7                                | MySQL 8.0                                                    |
| -------------------- | ---------------------------------------- | ------------------------------------------------------------ |
| 제공하는 암호화 기능 | 데이터 파일(테이블 스페이스)<br />암호화 | 데이터 파일 + 언두 로그 + 리두 로그 + 바이너리 로그<br />모두 암호화 지원 |

# 2. 참고 사항

핀테크 서비스 처럼 중요한 정보를 저장하는 서비스에서는 **이중 암호화 방법** 사용

- `이중 암호화 방법` : 어플리케이션 레벨에서 암호화 (컬럼 단위) + DB에서 다시 암호화 (테이블 단위)

# 3. 추가 학습(1) Undo, Redo, Binary Log 복습

| 이름      | Undo Log                                                     | Redo Log                                                     | Binary Log                                                   |
| --------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 정의      | 되돌리기 로그<br />트랜잭션이 데이터를 변경하기 이전의 값을 기록해두는 로그 | 다시 하기 로그<br />변경된 데이터를 다시 반영할 수 있도록, 변경된 내역의 메타데이터를 가지고 있는 로그 | 트랜잭션, DDL, DML 같은 데이터 변경 작업의 내용을 기록하는 로그 |
| 사용처    | (1)트랜잭션 실패로 인한 롤백<br />(2) MVCC로 인해, 특정 트랜잭션이 과거 어느 시점의 데이터를 봐야 할 경우 | 시스템 비정상 종료 시, 디스크에 반영되지 않은 내용을 디스크에 재반영하기 위해 | (1) Point-Time Recovery (시점 복구)<br />(2) Replication<br />(3) 감사 로그 (누가 무슨 SQL 날렸는지 확인) |
| 로깅 단위 | 페이지 단위                                                  | 페이지 단위                                                  | SQL 문장 단위                                                |
| 생성 시점 | `UPDATE`, `DELETE`,`INSERT` 등 실행 시, 변경전 데이터를 Undo Segment에 기록 | 트랜잭션이 변경 작업을 할 때, <br />변경된 내용을 redo log buffer에 먼저 기록 (메타 데이터만 기록, 실질 데이터는 버퍼풀 메모리에 적재) | 트랜잭션이 Commit되면 기록함                                 |
| 삭제 시점 | (1) 트랜잭션이 커밋되거나 롤백될 때,<br />(2) 예외 - MVCC 때문에 다른 트랜잭션이 아직 언두 로그 참조 중이면 삭제가 지연됨 | 디스크의 `ib_logfile0`, `ib_logfile1`등에 flush 된 후, checkpoint가 지나가면 순환 방식으로 덮어쓴다. (즉 오래된 로그는 자동으로 사라짐.) | (1) MySQL 옵션에 따라 주기적으로 삭제됨.<br />(2) 수동 명령어로 삭제 가능 |

