---
tags:
  - 데이터베이스
  - cs
parent: "[[함수 기반 인덱스]]"
related: 
created: 2025-06-06
---

# 0. 학습 목적
- 함수를 이용한 인덱스가 무엇인지 이해한다.
- 가상 컬럼 기반 인덱스와의 차이점을 이해한다.

# 1. 함수를 이용한 인덱스란? 
함수식을 직접 인덱스로 사용하는 것을 의미한다.

MySQL 5.7+에서는 함수 기반 인덱스는 무조건 가상 컬럼 기반 인덱스 방식으로 개발 해야 했지만, **mySQL 8.0** 이상 부터는 다음과 같은 방식이 가능해졌다.

```sql
CREATE TABLE user (
	user_id BIGINT,
	first_name VARCHAR(10),
	last_name VARCHAR(10),
	PRIMARY KEY (user_id)
	INDEX ix_fullname (CONCAT(first_name + ' ' + last_name))
);
```

위와 같이 **함수식을 직접 인덱스로 활용하는 방식**을 함수를 이용한 인덱스라고 한다.

### (1) 가상 컬럼 기반 인덱스와의 비교
위의 방식은 새로운 컬럼 자체를 만들지 않기 때문에, 가상 컬럼과 달리 기존 테이블의 변형을 일으키지 않는다. 
하지만 가상 컬럼 기반 인덱스나 함수식 직접 이용 인덱스나 내부 구현은 똑같이 이루어져 있어서 둘의 성능적인 차이는 없다.

### (2) 위의 함수식 인덱스 활용방법
인덱스로 만든 식과 똑같은 식을 WHERE 절의 조건으로 써야한다. 
인덱스 생성 시 작성한 함수 식과 다른 식을 WHERE의 조건으로 내걸면(둘의 결과가 같더라도), 옵티마이저가 둘을 다른 식으로 인식하여 함수식 인덱스를 활용하지 않는다.

# 핵심 요약
- 함수를 활용한 인덱스는 함수식을 직접 인덱스로 활용하는 것을 말한다.
- 테이블 변형을 일으키지 않는다는 점에서 가상 컬럼의 단점을 보완하지만, 둘은 내부 구현이 같아서, 성능은 같다.
- 함수식 인덱스를 활용하려면, 인덱스 생성 시 작성한 함수식과 똑같은 식을 WHERE문의 조건절로 걸어야 한다.

---

# Metadata

### A. 모르는 단어 정리 to Layman's term

###  B. 참고 문서
- real-my-sql 8.6.2 함수를 이용한 인덱스

### C. 자식 글

```dataview
TABLE without id file.inlinks AS "BackLink"
WHERE file.path = this.file.path
```
