---
tags:
  - cs
  - 데이터베이스
parent: "[[클러스터링 인덱스]]"
related:
  - "[[클러스터링 테이블 사용 시 주의사항]]"
created: 2025-06-17
---

# 0. 학습 목적
- Natrual Key와 Serogate Key에 대해서 이해한다.

# 1. Natural Key
업무 도메인 상 이미 존재하며, 레코드를 실질적으로 구분 지을 수 있는 컬럼을 활용한 식별자

## (1) 장점
- 직관적이다. 
	- 도메인 요구와 DB 질의 사이에 다른 사전 지식이 필요 없어서, 업무 흐름 이해가 쉽다.
	- 같은 이유로 디버깅 하기 용이하다.

## (2) 단점
- KEY 자체를 바꿔야 하는 가능성이 존재 
  : 업무 정책 변경으로 현 Natural Key가 더 이상 업무적인 의미가 없는 경우 해당 Natural Key 전체를 바꿔야 하는 경우가 생긴다.
- 크기 문제
  : 자연적인 데이터로 Key를 만들다보니, 복합키 이거나, 문자열을 활용해야할 수도 있다.
  이는 인덱스 크기 증가 -> B-tree 높이 상승 -> 조회, 조인 비용 증가로 이어진다.
- 보안문제
  : 업무상 중요한 컬럼을 Natural Key로 설정하게 될텐데 이때, 해당 컬럼이 PK로 자주 활용되며 서비스 전반에서 보여지게 된다. 당연히 보안에 안 좋다.
- 분산, 분할 환경에 취약 
  : 동시 다발적 생성 시, Key 중복이 일어날 수 있다. 이에 대한 별도의 중복 방지 로직이 필요하다.

# 2. Serogate Key
업무적 의미가 없이 오로지 레코드 구분이라는 시스템적 요구에 의해 인위적으로 생성된 인조 식별자

## (1) 장점
- 불변성 보장
  : 이러한 PK는 업무와 독립적이기 때문에 변경될 일이 거의 없다.
- 크기 형식이 일관되게 가능
  : 개발자가 임의로 설계하는 것이라 테이블마다 다르지 않고 크기, 형식을 일관되게 할 수 있다.
- 보안에 좋음
  : PK가 유출되어도 업무적인 의미가 없으므로 추측 공격 위험이 Natural Key에 비해 적다.
- 분산환경에 적합
  : UUID v1, UULD 활용하면 분산 환경의 여러 DB 서버에서도 KEY를 중복 없이 동시 생성 가능하다.

## (2) 단점
- 직관적이지 않다.
  : 업무와 독립됨. -> 도메인 요구에서 실제 쿼리문까지 과정 이해에 추가 지식이 필요 

# 3. 핵심 요약
- Natural Key는 업무 상 이미 존재하는 컬럼을 활용한 식별자, Serogate 키는 업무적 의미는 없고 오로지 레코드 구분을 위해 인위적으로 만든 식별자
- Natural Key를  활용 시 가독성은 높아지나, KEY의 변경 가능성, 키 크기가 비대해질 수 있음, 보안적 문제, 분산환경에 취약한 단점을 보인다.
- Serogate Key를 활용 시, Natural Key의 장점과 단점을 거꾸로 가진다.

---

# Metadata

### A. 모르는 단어 정리 

###  B. 참고 문서
- [대영이 정리](https://github.com/good-query/real-my-sql-study/blob/kdozlo-0610/kdozlo/08_%EC%9D%B8%EB%8D%B1%EC%8A%A4/8.8_%EC%B6%94%EA%B0%80%EB%82%B4%EC%9A%A9_Natural%20Key%EC%99%80%20Surrogate%20Key.md)

### C. 관련 글

```dataview
TABLE without id file.inlinks AS "BackLink"
WHERE file.path = this.file.path
```
