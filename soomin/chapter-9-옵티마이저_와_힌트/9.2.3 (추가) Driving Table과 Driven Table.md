---
tags:
  - 데이터베이스
  - cs
parent: "[[조인 (Join)]]"
related: 
created: 2025-06-01
---

# 0. 학습 목적

- 드라이빙 테이블과 드리븐 테이블에 대한 정의, 사용법을 익혀서 쿼리 튜닝 실력을 높인다.

# 1. Driving Table (이끄는 테이블) 

- 쿼리 실행 계획에서 먼저 접근하는 테이블 
- 드라이빙 테이블을 뭘로 선택하느냐에 따라 이후 조회 값 개수가 커지거나, 줄어든다. 
  이 때문에 드라이빙 테이블은 쿼리 성능에 큰 영향을 끼친다.
- `Outer Table (외부 테이블)` 이라고도 한다.

#### 쿼리 성능을 높여주는 Driving Table 선택법

- **현재의 쿼리문을 위한 적절한 인덱스가 구성된 테이블** 혹은 **접근 했을 때, 가장 작은 결과 집합 산출이 예상되는 테이블** (기수성, 선택도가 높은 테이블) 을 선택하는 것이 적절하다.

# 2. Driven Table

- 쿼리 실행 계획에서 Driving 테이블의 Join 연산에 의해 나중에 접근되는 테이블
- 상대적으로 선택도나 기수성이 낮은 테이블을 Driven 테이블로 배치하는 게 쿼리 성능을 위해 좋다.
- `Inner Table (내부 테이블)`이라고도 한다.


# 3. 그림으로 설명

![image.png](https://raw.githubusercontent.com/dalcheonroadhead/img-cloud/main/2025-05/20250601142726.png)

위와 같은 테이블에서 `1반 친구들의 모든 비상 연략망을 조회하기` 라는 쿼리를 실행해야 한다고 하자. 
비상 연락망의 레코드 건 수는 1,000건, 1반과 관련된 비상연락망은 500개이고,  User Table의 레코드 건 수는 100개, 1반은 30명이라고 해보자. 

### A. 비상 연락망이 Driving 테이블인 경우,

만약 이때 비상연락망 Table을 **Driving Table**로 선택하게 된다면, 1,000건을 읽어서, 모두 JOIN을 실행해야 한다. 이후 1반인 친구 30명과 관련된 레코드 건수 500개만 걸러야 할 것이다.

이는 1000건에 대한 JOIN이 필요하고, 모든 JOIN 테이블에 대한 필터링 작업이 필요해서 시간과 비용이 많이 든다.

### B. User가 Driving 테이블인 경우

100명 중 30명을 필터링한 후, 30명에 대해서만 JOIN 작업을 진행하면 된다. 
30명과 연관된 레코드 500개만 JOIN을 진행하면 될 뿐더러, JOIN에 사용하는 알고리즘에 따라 성능적 개선 여지가 많다. 

![image.png](https://raw.githubusercontent.com/dalcheonroadhead/img-cloud/main/2025-05/20250601142655.png)

# 핵심 요약

- Driving 테이블은 실행 계획 상 먼저 접근하는 테이블이다. 따라서, 실행 결과 집합이 최대한 작을 것으로 예상되는 테이블을 Driving 테이블로 써야 한다.
- 그 이유는, 상대적으로 앞에 접근하는 테이블에서 많이 필터링 될수록 뒷 테이블에서 조회되는 레코드 건 수가 줄어들어 더 빠른 조회가 가능해지기 때문이다.
  
- Drvien Table은 Driving 테이블의 JOIN 연산으로 인해 나중에 접근되는 테이블을 말한다.
  상대적으로 조회 결과 집합이 클 것으로 예상되는 테이블을 Drvien 테이블로 지정해야 한다.

---

# Metadata

### A. 모르는 단어 정리 to Layman's term

###  B. 참고 문서

- [SQL 튜닝 - 조인 알고리즘의 종류 및 개념 ](https://velog.io/@aelle/SQL-Tuning-%EC%A1%B0%EC%9D%B8-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98-%EC%A2%85%EB%A5%98-%EB%B0%8F-%EA%B0%9C%EB%85%90)

### C. 자식 글

```dataview
TABLE without id file.inlinks AS "BackLink"
WHERE file.path = this.file.path
```
