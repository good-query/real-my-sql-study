## 7.3 ν…μ΄λΈ” μ•”νΈν™”

### 7.3.1 ν…μ΄λΈ” μƒμ„±
```sql
mysql> CREATE TABLE tab_encrypted (
         id INT,
         data VARCHAR(100),
         PRIMARY KEY(id)
       ) ENCRYPTION='Y';
```
μΌλ°μ μΈ ν…μ΄λΈ” μƒμ„± κµ¬λ¬Έκ³Ό λ™μΌν•λ©°, λ§μ§€λ§‰μ— `ENCRYPTION = 'Y'` μµμ…λ§ μ¶”κ°€λ΅ λ„£μΌλ©΄ λλ‹¤. <br>
κ·Έλ¬λ©΄ μ΄ ν…μ΄λΈ”μ λ°μ΄ν„°κ°€ λ””μ¤ν¬μ— κΈ°λ΅λ  λ•λ” λ°μ΄ν„°κ°€ μλ™μΌλ΅ μ•”νΈν™”λμ–΄ μ €μ¥λκ³ , λ””μ¤ν¬μ—μ„ λ©”λ¨λ¦¬λ΅ μ½μ–΄μ¬ λ• λ³µνΈν™”λλ‹¤.
<br>

MySQL μ„λ²„μ λ¨λ“  ν…μ΄λΈ”μ— λ€ν•΄ μ•”νΈν™”λ¥Ό μ μ©ν•κ³ μ ν•λ‹¤λ©΄ `default_table_encryption` μ‹μ¤ν… λ³€μλ¥Ό `ON`μΌλ΅ μ„¤μ •ν•λ©΄ λλ‹¤.

<br>

### 7.3.2 μ‘μ© ν”„λ΅κ·Έλ¨ μ•”νΈν™”μ™€μ λΉ„κµ
μ‘μ© ν”„λ΅κ·Έλ¨μ—μ„μ μ•”νΈν™”λ” λ³΄ν†µ μ»¬λΌ λ‹¨μ„μ— μ μ©λκ³ , MySQL μ„λ²„μ—μ„μ μ•”νΈν™”λ” ν…μ΄λΈ” λ‹¨μ„λ΅ μ μ©λλ‹¤.
<br>

μ‘μ© ν”„λ΅κ·Έλ¨μ—μ„ μ§μ ‘ μ•”νΈν™”ν•΄μ„ MySQL μ„λ²„μ— μ €μ¥ν•λ” κ²½μ°, μΈλ±μ¤μ κΈ°λ¥μ„ 100% ν™μ©ν•  μ μ—†λ‹¤. <br>
μ™λƒν•λ©΄ MySQL μ„λ²„λ” μ΄λ―Έ μ•”νΈν™”λ κ°’μ„ κΈ°μ¤€μΌλ΅ μ •λ ¬ν–κΈ° λ•λ¬Έμ— μ•”νΈν™”λκΈ° μ „μ κ°’μ„ κΈ°μ¤€μΌλ΅ μ •λ ¬ν•  μκ°€ μ—†λ‹¤. <br>
ν•μ§€λ§ μ‘μ© ν”„λ΅κ·Έλ¨μ—μ„ μ§μ ‘ μ•”νΈν™”ν•μ§€ μ•κ³  MySQL μ„λ²„μ μ•”νΈν™” κΈ°λ¥(TDE)μ„ μ‚¬μ©ν•λ‹¤λ©΄ μ΄ κ°™μ€ μ μ•½μ€ μ—†λ‹¤.
<br>

λ°λ©΄, MySQL μ„λ²„μ TDE κΈ°λ¥μΌλ΅ μ•”νΈν™”ν•λ©΄ μ‹¤ν–‰ μ¤‘μΈ MySQL μ„λ²„μ— λ΅κ·ΈμΈν• μ‚¬μ©μλ” λ¨λ“  λ°μ΄ν„°λ¥Ό ν‰λ¬ΈμΌλ΅ ν™•μΈν•  μ μλ‹¤. <br>
ν•μ§€λ§ μ‘μ© ν”„λ΅κ·Έλ¨ μ•”νΈν™”λ” λ΅κ·ΈμΈν• μ‚¬μ©μλ„ ν‰λ¬Έμ λ‚΄μ©μ„ ν™•μΈν•  μ μ—†λ‹¤.
<br>

λ”°λΌμ„ μ‘μ© ν”„λ΅κ·Έλ¨κ³Ό MySQL μ„λ²„μ—μ„μ μ•”νΈν™” κΈ°λ¥μ„ μ„λΉ„μ¤μ μ”κ±΄κ³Ό μ„±λ¥μ„ κ³ λ ¤ν•μ—¬ μ μ„ νƒν•λ„λ΅ ν•μ.

<br>

### 7.3.3 ν…μ΄λΈ”μ¤νμ΄μ¤ μ΄λ™
ν…μ΄λΈ”μ„ λ‹¤λ¥Έ μ„λ²„λ΅ λ³µμ‚¬ν•΄μ•Ό ν•λ” κ²½μ° λλ” νΉμ • ν…μ΄λΈ”μ λ°μ΄ν„° νμΌλ§ λ°±μ—…ν–λ‹¤κ°€ λ³µκµ¬ν•λ” κ²½μ°, <br>
ν…μ΄λΈ”μ¤νμ΄μ¤ μ΄λ™(Export & Import) κΈ°λ¥μ΄ λ μ½”λ“λ¥Ό λ¤ν”„ν–λ‹¤κ°€ λ³µκµ¬ν•λ” λ°©μ‹λ³΄λ‹¤ ν›¨μ”¬ ν¨μ¨μ μ΄κ³  λΉ λ¥΄λ‹¤.

<br>

```sql
mysql> FLUSH TABLES source_table FOR EXPORT;
```
FLUSH TABLES λ…λ Ήμ„ ν†µν•΄ ν…μ΄λΈ”μ¤νμ΄μ¤λ¥Ό exportν•  μ μλ‹¤.

<br>

**β… μ•”νΈν™”λμ§€ μ•μ€ ν…μ΄λΈ”μ λ³µμ‚¬ κ³Όμ •**
1. `FLUSH TABLES` λ…λ Ήμ΄ μ‹¤ν–‰λλ©΄ MySQL μ„λ²„λ” ν•΄λ‹Ή ν…μ΄λΈ”μ μ €μ¥λμ§€ μ•μ€ λ³€κ²½ μ‚¬ν•­μ„ λ¨λ‘ λ””μ¤ν¬λ΅ κΈ°λ΅ν•κ³ , ν…μ΄λΈ”μ— μ ‘κ·Όν•  μ μ—†κ² μ κΈμ„ κ±΄λ‹¤.
2. κ·Έμ™€ λ™μ‹μ— ν…μ΄λΈ”μ κµ¬μ΅°λ¥Ό `source_table.cfg` νμΌλ΅ κΈ°λ΅ν•΄λ‘”λ‹¤.  
3. κ·Έλ¬λ©΄ `source_table.ibd` νμΌκ³Ό `source_table.cfg` νμΌμ„ λ©μ μ§€ μ„λ²„λ΅ λ³µμ‚¬ν•λ‹¤.
4. λ³µμ‚¬κ°€ λ¨λ‘ μ™„λ£λλ©΄ `UNLOCK TABLES` λ…λ Ήμ„ μ‹¤ν–‰ν•΄ source_tableμ„ μ‚¬μ©ν•  μ μκ² ν•λ©΄ λλ‹¤.

<br>

**π’΅ μ°Έκ³ **
|νμΌλ…|μ—­ν• |
|---|---|
|`source_table.ibd`|μ‹¤μ  ν…μ΄λΈ” λ°μ΄ν„° + μΈλ±μ¤κ°€ μ €μ¥λ νμΌ|
|`source_table.cfg`|ν…μ΄λΈ” λ©”νƒ€λ°μ΄ν„° μ •λ³΄|

<br>

**β… μ•”νΈν™”λ ν…μ΄λΈ”μ λ³µμ‚¬ κ³Όμ •**
1. `FLUSH TABLES` λ…λ Ήμ΄ μ‹¤ν–‰λλ©΄ MySQL μ„λ²„λ” μ„μ‹λ΅ μ‚¬μ©ν•  λ§μ¤ν„° ν‚¤λ¥Ό λ°κΈ‰ν•΄μ„ `source_table.cfp` νμΌλ΅ κΈ°λ΅ν•λ‹¤.
2. κ·Έλ¦¬κ³  μ•”νΈν™”λ ν…μ΄λΈ”μ ν…μ΄λΈ”μ¤νμ΄μ¤ ν‚¤λ¥Ό κΈ°μ΅΄ λ§μ¤ν„° ν‚¤λ΅ λ³µνΈν™”ν• ν›„, μ„μ‹λ΅ λ°κΈ‰ν• λ§μ¤ν„° ν‚¤λ¥Ό μ΄μ©ν•΄ λ‹¤μ‹ μ•”νΈν™”ν•΄μ„ λ°μ΄ν„° νμΌμ ν—¤λ” λ¶€λ¶„μ— μ €μ¥ν•λ‹¤.
3. λ”°λΌμ„ μ•”νΈν™”λ ν…μ΄λΈ”μ κ²½μ° ν…μ΄λΈ” μ¤νμ΄μ¤ μ΄λ™ κΈ°λ¥μ„ μ‚¬μ©ν•  λ• **λ°λ“μ‹ `*.cfp` νμΌλ„ ν•¨κ» λ³µμ‚¬ν•΄μ•Ό ν•λ‹¤.**
